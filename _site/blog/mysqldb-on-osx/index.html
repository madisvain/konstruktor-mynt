<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="blog, programming, python, django, google app engine, flask, web development">
    <meta name="description" content="
	Blog about web application development and programming. With posts ranging from Python, Django to HTML and CSS.
">

    <title>Konstruktor by Madis Väin</title>

    <!-- 1140px Grid system -->
    <!--[if lte IE 9]><link rel="stylesheet" href="/static/css/ie.css" type="text/css" media="screen" /><![endif]-->
    <link rel="stylesheet" href="/static/css/1140.css" type="text/css" media="screen">
    <link rel="stylesheet" href="/static/css/styles.css" type="text/css" media="screen">
    
	<link rel="stylesheet" href="/static/css/hilite.css" type="text/css" media="screen">


    <script src="/static/js/css3-mediaqueries.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load("mootools", "1.4.1");
    </script>
	
	<script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-27665790-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
</head>
<body>
    <div id="header" class="container">
        <div class="row">
            <div id="menu">
                <ul>
                    <li>
                        <a href="/index.html">
                            <img src="/static/images/templates.png" alt="Blog" />Blog
                        </a>
                    </li>
                    <!--
                    <li>
                        <a href="#">
                            <img src="/static/img/projects.png" alt="Projects" />Projects
                        </a>
                    </li>
                    -->
                    <li>
                        <a href="/about.html">
                            <img src="/static/images/about.png" alt="About" />About
                        </a>
                    </li>
                </ul>
            </div>
            <div id="logo">
                <h1>Konstruktor</h1>
            </div>
        </div>
    </div>
    <div id="content" class="container">
        
    <div class="row">
        <div class="eightcol">
      <h2 class="title">MySQLdb on OS X</h2>
      <p class="post-data">
          Posted by Madis Väin on 01 Dec 2011.
          
            <span class="grey">mysql, </span>
          
            <span class="grey">os x</span>
          
      </p>
      <p>Installing MySQL support for python on OS X has almost always been troublesome. Still seems to be so in Lion so I&#39;ll just add some quick notes how to do it cleanly and painlessly.</p>

<p>These instructions are intended to be used with the MySQL official Community Server release.</p>
<h3>PIP or easy_install</h3>
<p>For installing python modules I use PIP but this also works with source or easy_install. At first installing with PIP would fail with the following tracepack.</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre>File &quot;setup_posix.py&quot;, line 24, in mysql_config
raise EnvironmentError(&quot;%s not found&quot; % (mysql_config.path,))
EnvironmentError: mysql_config not found
</pre></div>
</td></tr></table></div></div>
<p>So we need to set the correct mysql_config path in the for the current shell.</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>PATH=/usr/local/mysql/bin:$PATH
</pre></div>
</td></tr></table></div></div>
<p>This should fix the mysql_config not found problem.</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">mysql</span><span class="o">-</span><span class="n">python</span>
</pre></div>
</td></tr></table></div></div><h3>Source install</h3>
<p>If you are doing a source install you&#39;d edit the source of mysql-python&#39;s setup_posix.py line 26</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">mysql_config</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/usr/local/mysql/bin/mysql_config&quot;</span>
</pre></div>
</td></tr></table></div></div>
<p>Fallows a regular source install</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">sudo</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span>
<span class="n">sudo</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</td></tr></table></div></div><h4>libmysqlclient import error</h4>
<p>If you&#39;d try to use mysql-python right now you&#39;d probably get another import error.</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="ne">ImportError</span><span class="p">:</span> <span class="n">dlopen</span><span class="p">(</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">konstruktor</span><span class="o">/.</span><span class="n">python</span><span class="o">-</span><span class="n">eggs</span><span class="o">/</span><span class="n">MySQL_python</span><span class="o">-</span><span class="mf">1.2</span><span class="o">.</span><span class="mi">3</span><span class="o">-</span><span class="n">py2</span><span class="o">.</span><span class="mi">7</span><span class="o">-</span><span class="n">macosx</span><span class="o">-</span><span class="mf">10.7</span><span class="o">-</span><span class="n">intel</span><span class="o">.</span><span class="n">egg</span><span class="o">-</span><span class="n">tmp</span><span class="o">/</span><span class="n">_mysql</span><span class="o">.</span><span class="n">so</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span> <span class="n">Library</span> <span class="ow">not</span> <span class="n">loaded</span><span class="p">:</span> <span class="n">libmysqlclient</span><span class="o">.</span><span class="mf">18.</span><span class="n">dylib</span>
</pre></div>
</td></tr></table></div></div>
<p>To fix this one let&#39;s just add a few symlinks.</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre>sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib
sudo ln -s /usr/local/mysql/lib /usr/local/mysql/lib/mysql
</pre></div>
</td></tr></table></div></div><h3>Try it out</h3>
<p>Well we have done all the fixes now and things should work. To be sure let&#39;s try importing it in a python interpreter.</p>
<div class="code"><div><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">MySQLdb</span>
</pre></div>
</td></tr></table></div></div>
<p>If you get no errors then you have a working mysql-python module and can start working with MySQL.</p>

        </div>
        <div class="fourcol last">
            <div style="margin-top: 120px;">
                &nbsp;
            </div>
        </div>
    </div>
    <div class="row">
        <div class="eightcol">
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_shortname = 'konstruktoree';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
        <div class="fourcol last">
        </div>
    </div>

    </div>

    
</body>
</html>